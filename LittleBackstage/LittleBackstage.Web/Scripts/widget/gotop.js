(function(a,b){a.ui.define("gotop",{_data:{container:"",useFix:true,useHide:true,useAnimation:false,position:{bottom:10,right:10},afterScroll:null,iScrollInstance:null,disablePlugin:false},_create:function(){var c=this;(c.root()||c.root(a("<div></div>"))).addClass("ui-gotop").append("<div></div>").appendTo(c.data("container")||(c.root().parent().length?"":document.body));return c},_setup:function(d){var c=this;c._create();return c},_init:function(){var e=this,c=e.root(),d=a.proxy(e._eventHandler,e);e.data("useHide")&&a(document).on("touchmove",d);a(document).on("touchend touchcancel scrollStop",d);a(window).on("scroll ortchange",d);c.on("click",d);e.on("destroy",function(){a(document).off("touchmove touchend touchcancel scrollStop",d);a(window).off("scroll ortchange",d)});e.data("useFix")&&c.fix(e.data("position"));e.data("root",c[0]);return e},_eventHandler:function(d){var c=this;switch(d.type){case"touchmove":c.hide();break;case"scroll":clearTimeout(c.data("_TID"));break;case"touchend":case"touchcancel":clearTimeout(c.data("_TID"));c.data("_TID",a.later(function(){c._check.call(c)},300));break;case"scrollStop":c._check();break;case"ortchange":c._check.call(c);break;case"click":c._scrollTo();break}},_check:function(c){var d=this;(c!==b?c:window.pageYOffset)>document.documentElement.clientHeight?d.show():d.hide();return d},_scrollTo:function(){var c=this,d=window.pageYOffset;c.hide();clearTimeout(c.data("_TID"));if(!c.data("useAnimation")){window.scrollTo(0,1);c.trigger("afterScroll")}else{c.data("moveToTop",a.later(function(){if(d>1){window.scrollBy(0,-Math.min(150,d-1));d-=150}else{clearInterval(c.data("moveToTop"));c.trigger("afterScroll")}},25,true))}return c},show:function(){this._data.root.style.display="block";return this},hide:function(){this._data.root.style.display="none";return this}})})(Zepto);