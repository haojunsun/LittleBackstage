(function(e,f){var c=1,b=function(){return c++},a={nav:'<ul class="ui-tabs-nav"><% var item; for(var i=0, length=items.length; i<length; i++) { item=items[i]; %><li<% if(i==active){ %> class="ui-state-active"<% } %>><a href="javascript:;"><%=item.title%></a></li><% } %></ul>',content:'<div class="ui-viewport ui-tabs-content"><% var item; for(var i=0, length=items.length; i<length; i++) { item=items[i]; %><div<% if(item.id){ %> id="<%=item.id%>"<% } %> class="ui-panel ui-tabs-panel <%=transition%><% if(i==active){ %> ui-state-active<% } %>"><%=item.content%></div><% } %></div>'},d=/^#(.+)$/;e.ui.define("tabs",{_data:{active:0,items:null,transition:"slide",activate:null,beforeActivate:null,animateComplete:null},_prepareDom:function(k,j){var n=this,l,o=n._el,m,g,i,h;switch(k){case"fullsetup":case"setup":j._nav=n._findElement("ul").first();if(j._nav){j._content=n._findElement("div.ui-tabs-content");j._content=((j._content&&j._content.first())||e("<div></div>").appendTo(o)).addClass("ui-viewport ui-tabs-content");m=[];j._nav.addClass("ui-tabs-nav").children().each(function(){var r=n._findElement("a",this),p=r?r.attr("href"):e(this).attr("data-url"),s,q;s=d.test(p)?RegExp.$1:"tabs_"+b();(q=n._findElement("#"+s)||e('<div id="'+s+'"></div>')).addClass("ui-panel ui-tabs-panel"+(j.transition?" "+j.transition:"")).appendTo(j._content);m.push({id:s,href:p,title:r?r.attr("href","javascript:;").text():e(this).text(),content:q})});j.items=m;j.active=Math.max(0,Math.min(m.length-1,j.active||e(".ui-state-active",j._nav).index()||0));n._getPanel().add(j._nav.children().eq(j.active)).addClass("ui-state-active");break}default:m=j.items=j.items||[];g=[];i=[];j.active=Math.max(0,Math.min(m.length-1,j.active));e.each(m,function(p,q){h="tabs_"+b();g.push({href:q.href||"#"+h,title:q.title});i.push({content:q.content||"",id:h});m[p].id=h});j._nav=e(e.parseTpl(a.nav,{items:g,active:j.active})).prependTo(o);j._content=e(e.parseTpl(a.content,{items:i,active:j.active,transition:j.transition})).appendTo(o);j.container=j.container||(o.parent().length?null:"body")}j.container&&o.appendTo(j.container);n._fitToContent(n._getPanel())},_getPanel:function(g){var h=this._data;return e("#"+h.items[g===f?h.active:g].id)},_findElement:function(g,i){var h=e(i||this._el).find(g);return h.length?h:null},_create:function(){var g=this,h=g._data;g._el=g._el||e("<div></div>");g._prepareDom("create",h)},_setup:function(i){var g=this,h=g._data;g._prepareDom(i?"fullsetup":"setup",h)},_init:function(){var i=this,j=i._data,h=i.root(),g=e.proxy(i._eventHandler,i);h.addClass("ui-tabs");j._nav.on("tap",g).children().highlight("ui-state-hover");e(window).on("ortchange",g)},_eventHandler:function(i){var g,h=this._data;switch(i.type){case"ortchange":this.refresh();break;default:if((g=e(i.target).closest("li",h._nav.get(0)))&&g.length){i.preventDefault();this.switchTo(g.index())}}},_fitToContent:function(i){var h=this._data,g=h._content;h._plus===f&&(h._plus=parseFloat(g.css("border-top-width"))+parseFloat(g.css("border-bottom-width")));g.height(i.height()+h._plus);return this},switchTo:function(h){var k=this,g=k._data,j=g.items,n,l,m,i,o;if(!g._buzy&&g.active!=(h=Math.max(0,Math.min(j.length-1,h)))){l=e.extend({},j[h]);l.div=k._getPanel(h);l.index=h;m=e.extend({},j[g.active]);m.div=k._getPanel();m.index=g.active;n=e.Event("beforeActivate");k.trigger(n,[l,m]);if(n.defaultPrevented){return k}g._content.children().removeClass("ui-state-active");l.div.addClass("ui-state-active");g._nav.children().removeClass("ui-state-active").eq(l.index).addClass("ui-state-active");if(g.transition){g._buzy=true;o=e.fx.animationEnd+".tabs";i=h>g.active?"":" reverse";g._content.addClass("ui-viewport-transitioning");m.div.addClass("out"+i);l.div.addClass("in"+i).on(o,function(p){if(p.target!=p.currentTarget){return}l.div.off(o,arguments.callee);g._buzy=false;m.div.removeClass("out reverse");l.div.removeClass("in reverse");g._content.removeClass("ui-viewport-transitioning");k.trigger("animateComplete",[l,m]);k._fitToContent(l.div)})}g.active=h;k.trigger("activate",[l,m]);g.transition||k._fitToContent(l.div)}return k},refresh:function(){return this._fitToContent(this._getPanel())},destroy:function(){var h=this._data,g=this._eventHandler;h._nav.off("tap",g).children().highlight();h.swipe&&h._content.off("swipeLeft swipeRight",g);return this.$super("destroy")}})})(Zepto);