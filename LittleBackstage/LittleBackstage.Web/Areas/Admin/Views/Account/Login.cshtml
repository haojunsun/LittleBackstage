@{
    Layout = null;
}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title> - 登录</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
    <link rel="shortcut icon" href="~/favicon.ico">
    <link href="~/Assets/css/bootstrap.min.css?v=3.3.6" rel="stylesheet">
    <link href="~/Assets/css/font-awesome.css?v=4.4.0" rel="stylesheet">
    <link href="~/Assets/css/animate.css" rel="stylesheet">
    <link href="~/Assets/css/style.css" rel="stylesheet">
    <!--[if lt IE 9]>
    <meta http-equiv="refresh" content="0;ie.html" />
    <![endif]-->
    <script>if (window.top !== window.self) { window.top.location = window.location; }</script>
</head>
<body class="gray-bg">
    <div class="middle-box text-center loginscreen  animated fadeInDown">
        <div>
            <div>
                <h2 class="logo-name">后台管理系统V1.0</h2>
            </div>
            <h3 style="margin-top:80px">欢迎登录</h3>
            <span style="display:none;color:red;" id="errorMgs"></span>
            @*@using (Html.BeginForm("Login", "Account", FormMethod.Post, new { @class = "m-t", @role = "form" }))
                {*@@*}*@
                <form class="m-t" role="form">
                    <center>
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="用户名" required="" id="name">
                        </div>
                        <div class="form-group">
                            <input type="password" class="form-control" placeholder="密码" required="" id="password">
                        </div>
                        <button type="button" class="btn btn-primary block full-width m-b" onclick="login()">登 录</button>
                        <p class="text-muted text-center">
                            <a href="login.html#"><small>忘记密码了？</small></a> | <a href="@Url.Action("Register")">注册一个新账号</a>
                        </p>
                    </center>
                </form>
            </div>
        </div>
        <!-- 全局js -->
        <script src="~/Assets/js/jquery.min.js?v=2.1.4"></script>
        <script src="~/Assets/js/bootstrap.min.js?v=3.3.6"></script>
        <script type="text/javascript">
            var timeo;
            function login() {
                var name = $("#name").val();
                var password = $("#password").val();
                $.ajax({
                    url: '@Url.Action("Login", "Account")',
                    type: "POST",
                    cache: false,
                    data: { username: name, password: password },
                    dataType: "json",
                    success: function (result) {
                        if (result.code == 200) {
                            window.location.href = result.returnUrl;
                        } else {
                            console.log(result);
                            $('#errorMgs').html(result.message);
                            $('#errorMgs').css('display', 'block');
                            //clearTimeout(timeo);
                            //timeo = setTimeout(function () {
                            //    $("#errorMgs").fadeOut();
                            //}, 3000);
                        }
                    },
                    error: function (result) {
                        console.log(result);
                        alert("服务器未知错误！");
                    }
                });
            }
        </script>
    </body>
</html>
